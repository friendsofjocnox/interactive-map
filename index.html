<!DOCTYPE html>
<html>
<head>
    <title>RTS Map Demo</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <style>
        #map { height: 100vh; }
        .unit {
            background: red;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid white;
        }
    </style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    var map = L.map('map').setView([40.7128, -74.0060], 13);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    let unit = null;

    // Place unit on first click
    map.on('click', function(e) {

        if (!unit) {
            unit = L.marker(e.latlng, {
                icon: L.divIcon({
                    className: 'unit'
                })
            }).addTo(map);
        } else {
            moveUnit(e.latlng);
        }
    });

    function moveUnit(destination) {
        let current = unit.getLatLng();
        let steps = 100;
        let i = 0;

        let latStep = (destination.lat - current.lat) / steps;
        let lngStep = (destination.lng - current.lng) / steps;

        let interval = setInterval(function() {
            if (i >= steps) {
                clearInterval(interval);
                return;
            }

            current.lat += latStep;
            current.lng += lngStep;

            unit.setLatLng(current);
            i++;
        }, 20);
    }
</script>

</body>
</html>
